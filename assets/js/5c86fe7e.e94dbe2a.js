"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics=globalThis.webpackChunkphysical_ai_humanoid_robotics||[]).push([[642],{8453(n,e,r){r.d(e,{R:()=>s,x:()=>a});var i=r(6540);const t={},o=i.createContext(t);function s(n){const e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),i.createElement(o.Provider,{value:e},n.children)}},9102(n,e,r){r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-2/unity-rendering","title":"Unity Rendering","description":"Guide to using Unity for high-fidelity rendering and visualization in robotics simulation","source":"@site/docs/module-2/unity-rendering.md","sourceDirName":"module-2","slug":"/module-2/unity-rendering","permalink":"/physical-ai/docs/module-2/unity-rendering","draft":false,"unlisted":false,"editUrl":"https://github.com/physical-ai-textbook/book-ai/tree/main/docs/module-2/unity-rendering.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"unity-rendering","title":"Unity Rendering","sidebar_position":5,"description":"Guide to using Unity for high-fidelity rendering and visualization in robotics simulation","keywords":["unity","rendering","visualization","robotics simulation","high-fidelity graphics","unity robotics"]},"sidebar":"textbook","previous":{"title":"URDF and SDF","permalink":"/physical-ai/docs/module-2/urdf-sdf"},"next":{"title":"Sensor Simulation","permalink":"/physical-ai/docs/module-2/sensor-simulation"}}');var t=r(4848),o=r(8453);const s={id:"unity-rendering",title:"Unity Rendering",sidebar_position:5,description:"Guide to using Unity for high-fidelity rendering and visualization in robotics simulation",keywords:["unity","rendering","visualization","robotics simulation","high-fidelity graphics","unity robotics"]},a="Unity Rendering",l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction to Unity for Robotics",id:"introduction-to-unity-for-robotics",level:2},{value:"Unity vs Traditional Robotics Simulators",id:"unity-vs-traditional-robotics-simulators",level:3},{value:"Unity Setup for Robotics",id:"unity-setup-for-robotics",level:2},{value:"Installing Unity Hub and Editor",id:"installing-unity-hub-and-editor",level:3},{value:"Unity Robotics Package Installation",id:"unity-robotics-package-installation",level:3},{value:"Basic Project Setup",id:"basic-project-setup",level:3},{value:"Unity Scene Architecture for Robotics",id:"unity-scene-architecture-for-robotics",level:2},{value:"Basic Scene Structure",id:"basic-scene-structure",level:3},{value:"Creating a Basic Robot in Unity",id:"creating-a-basic-robot-in-unity",level:3},{value:"Environment Creation",id:"environment-creation",level:2},{value:"Creating Realistic Environments",id:"creating-realistic-environments",level:3},{value:"Terrain System",id:"terrain-system",level:4},{value:"ProBuilder for Quick Prototyping",id:"probuilder-for-quick-prototyping",level:4},{value:"Material and Shader Setup",id:"material-and-shader-setup",level:3},{value:"Physically-Based Materials",id:"physically-based-materials",level:4},{value:"Standard Shader Properties",id:"standard-shader-properties",level:4},{value:"Physics Configuration",id:"physics-configuration",level:2},{value:"Unity Physics for Robotics",id:"unity-physics-for-robotics",level:3},{value:"Joint Simulation",id:"joint-simulation",level:3},{value:"Sensor Simulation",id:"sensor-simulation",level:2},{value:"Camera Sensors",id:"camera-sensors",level:3},{value:"LiDAR Simulation",id:"lidar-simulation",level:3},{value:"ROS Integration",id:"ros-integration",level:2},{value:"Unity-ROS Bridge",id:"unity-ros-bridge",level:3},{value:"Publishing Robot State",id:"publishing-robot-state",level:3},{value:"Advanced Rendering Techniques",id:"advanced-rendering-techniques",level:2},{value:"Physically-Based Rendering (PBR)",id:"physically-based-rendering-pbr",level:3},{value:"Real-time Global Illumination",id:"real-time-global-illumination",level:3},{value:"Post-Processing Effects",id:"post-processing-effects",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Level of Detail (LOD)",id:"level-of-detail-lod",level:3},{value:"Occlusion Culling",id:"occlusion-culling",level:3},{value:"XR and Advanced Visualization",id:"xr-and-advanced-visualization",level:2},{value:"Virtual Reality Integration",id:"virtual-reality-integration",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Coordinate System Consistency",id:"1-coordinate-system-consistency",level:3},{value:"2. Performance Monitoring",id:"2-performance-monitoring",level:3},{value:"3. Resource Management",id:"3-resource-management",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2},{value:"1. Coordinate System Issues",id:"1-coordinate-system-issues",level:3},{value:"2. Performance Issues",id:"2-performance-issues",level:3},{value:"3. Synchronization Problems",id:"3-synchronization-problems",level:3},{value:"Learning Objectives Review",id:"learning-objectives-review",level:2},{value:"Practical Exercise",id:"practical-exercise",level:2},{value:"Assessment Questions",id:"assessment-questions",level:2},{value:"Further Reading",id:"further-reading",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"unity-rendering",children:"Unity Rendering"})}),"\n",(0,t.jsx)(e.p,{children:"Unity provides high-fidelity rendering capabilities that complement traditional robotics simulators like Gazebo. This chapter covers how to use Unity for advanced visualization and rendering in robotics applications."}),"\n",(0,t.jsx)(e.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Understand Unity's role in robotics simulation and visualization"}),"\n",(0,t.jsx)(e.li,{children:"Set up Unity for robotics applications and simulation"}),"\n",(0,t.jsx)(e.li,{children:"Create realistic environments and materials for robotics"}),"\n",(0,t.jsx)(e.li,{children:"Integrate Unity with ROS/ROS 2 for robotics workflows"}),"\n",(0,t.jsx)(e.li,{children:"Apply advanced rendering techniques for robotics applications"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"introduction-to-unity-for-robotics",children:"Introduction to Unity for Robotics"}),"\n",(0,t.jsx)(e.p,{children:"Unity has emerged as a powerful platform for robotics simulation, offering:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Photorealistic Rendering"}),": Advanced graphics with physically-based rendering"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Realistic Physics"}),": Built-in physics engine with accurate collision detection"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Extensive Asset Library"}),": Thousands of pre-made models and environments"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Cross-Platform Deployment"}),": Deploy to various platforms and devices"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Scripting Capabilities"}),": Flexible C# scripting for custom behaviors"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"XR Support"}),": Virtual and augmented reality capabilities"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"unity-vs-traditional-robotics-simulators",children:"Unity vs Traditional Robotics Simulators"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Aspect"}),(0,t.jsx)(e.th,{children:"Unity"}),(0,t.jsx)(e.th,{children:"Gazebo"}),(0,t.jsx)(e.th,{children:"Webots"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Graphics Quality"}),(0,t.jsx)(e.td,{children:"Photorealistic"}),(0,t.jsx)(e.td,{children:"Good"}),(0,t.jsx)(e.td,{children:"Good"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Physics Accuracy"}),(0,t.jsx)(e.td,{children:"Good"}),(0,t.jsx)(e.td,{children:"Excellent"}),(0,t.jsx)(e.td,{children:"Excellent"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Learning Curve"}),(0,t.jsx)(e.td,{children:"Steeper"}),(0,t.jsx)(e.td,{children:"Moderate"}),(0,t.jsx)(e.td,{children:"Moderate"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Asset Availability"}),(0,t.jsx)(e.td,{children:"Extensive"}),(0,t.jsx)(e.td,{children:"Limited"}),(0,t.jsx)(e.td,{children:"Moderate"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"ROS Integration"}),(0,t.jsx)(e.td,{children:"Good (Unity Robotics)"}),(0,t.jsx)(e.td,{children:"Excellent"}),(0,t.jsx)(e.td,{children:"Good"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Performance"}),(0,t.jsx)(e.td,{children:"High"}),(0,t.jsx)(e.td,{children:"High"}),(0,t.jsx)(e.td,{children:"High"})]})]})]}),"\n",(0,t.jsx)(e.h2,{id:"unity-setup-for-robotics",children:"Unity Setup for Robotics"}),"\n",(0,t.jsx)(e.h3,{id:"installing-unity-hub-and-editor",children:"Installing Unity Hub and Editor"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Download Unity Hub"}),": From the Unity website"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Install Unity Editor"}),": Choose LTS (Long Term Support) version"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Install Unity Robotics Package"}),": Through Package Manager"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Install ROS-TCP-Connector"}),": For ROS communication"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"unity-robotics-package-installation",children:"Unity Robotics Package Installation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'// In Unity, go to Window > Package Manager\r\n// Install "ROS TCP Connector" and "Unity Robotics Package"\n'})}),"\n",(0,t.jsx)(e.h3,{id:"basic-project-setup",children:"Basic Project Setup"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Create a new 3D project"}),"\n",(0,t.jsxs)(e.li,{children:["Import necessary packages:","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Unity Robotics Package"}),"\n",(0,t.jsx)(e.li,{children:"ROS TCP Connector"}),"\n",(0,t.jsx)(e.li,{children:"ProBuilder (for quick prototyping)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"unity-scene-architecture-for-robotics",children:"Unity Scene Architecture for Robotics"}),"\n",(0,t.jsx)(e.h3,{id:"basic-scene-structure",children:"Basic Scene Structure"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Scene Root\r\n\u251c\u2500\u2500 Environment\r\n\u2502   \u251c\u2500\u2500 Ground Plane\r\n\u2502   \u251c\u2500\u2500 Walls\r\n\u2502   \u251c\u2500\u2500 Objects\r\n\u2502   \u2514\u2500\u2500 Lighting\r\n\u251c\u2500\u2500 Robot\r\n\u2502   \u251c\u2500\u2500 Robot Base\r\n\u2502   \u251c\u2500\u2500 Links\r\n\u2502   \u251c\u2500\u2500 Joints\r\n\u2502   \u2514\u2500\u2500 Sensors\r\n\u251c\u2500\u2500 Lighting\r\n\u2502   \u251c\u2500\u2500 Directional Light (Sun)\r\n\u2502   \u251c\u2500\u2500 Point Lights\r\n\u2502   \u2514\u2500\u2500 Reflection Probes\r\n\u2514\u2500\u2500 Cameras\r\n    \u251c\u2500\u2500 Main Camera\r\n    \u2514\u2500\u2500 Sensor Cameras\n"})}),"\n",(0,t.jsx)(e.h3,{id:"creating-a-basic-robot-in-unity",children:"Creating a Basic Robot in Unity"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing Unity.Robotics.ROSTCPConnector;\r\n\r\npublic class UnityRobot : MonoBehaviour\r\n{\r\n    [SerializeField] private float moveSpeed = 1.0f;\r\n    [SerializeField] private float turnSpeed = 1.0f;\r\n\r\n    private ROSConnection ros;\r\n    private string robotName = "unity_robot";\r\n\r\n    void Start()\r\n    {\r\n        // Connect to ROS\r\n        ros = ROSConnection.instance;\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        // Process input for manual control\r\n        float moveInput = Input.GetAxis("Vertical");\r\n        float turnInput = Input.GetAxis("Horizontal");\r\n\r\n        // Move the robot\r\n        transform.Translate(Vector3.forward * moveInput * moveSpeed * Time.deltaTime);\r\n        transform.Rotate(Vector3.up, turnInput * turnSpeed * Time.deltaTime);\r\n\r\n        // Send robot state to ROS\r\n        SendRobotState();\r\n    }\r\n\r\n    void SendRobotState()\r\n    {\r\n        // Send transform data to ROS\r\n        ros.SendUnityMessage("robot_state", new RobotStateMessage\r\n        {\r\n            position = transform.position,\r\n            rotation = transform.rotation\r\n        });\r\n    }\r\n}\r\n\r\n// Message structure\r\n[System.Serializable]\r\npublic struct RobotStateMessage\r\n{\r\n    public Vector3 position;\r\n    public Quaternion rotation;\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"environment-creation",children:"Environment Creation"}),"\n",(0,t.jsx)(e.h3,{id:"creating-realistic-environments",children:"Creating Realistic Environments"}),"\n",(0,t.jsx)(e.h4,{id:"terrain-system",children:"Terrain System"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"// For outdoor environments\r\nusing UnityEngine;\r\n\r\npublic class TerrainSetup : MonoBehaviour\r\n{\r\n    public Terrain terrain;\r\n    public int terrainSize = 1000;\r\n    public int heightmapResolution = 512;\r\n\r\n    void Start()\r\n    {\r\n        SetupTerrain();\r\n    }\r\n\r\n    void SetupTerrain()\r\n    {\r\n        terrain.terrainData.size = new Vector3(terrainSize, 20, terrainSize);\r\n\r\n        // Create heightmap\r\n        float[,] heights = new float[heightmapResolution, heightmapResolution];\r\n        for (int x = 0; x < heightmapResolution; x++)\r\n        {\r\n            for (int y = 0; y < heightmapResolution; y++)\r\n            {\r\n                heights[x, y] = Mathf.PerlinNoise(x * 0.01f, y * 0.01f) * 0.5f;\r\n            }\r\n        }\r\n\r\n        terrain.terrainData.SetHeights(0, 0, heights);\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(e.h4,{id:"probuilder-for-quick-prototyping",children:"ProBuilder for Quick Prototyping"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"// Use ProBuilder to quickly create environment objects\r\n// GameObject > ProBuilder > Cube for basic shapes\r\n// Then apply realistic materials\n"})}),"\n",(0,t.jsx)(e.h3,{id:"material-and-shader-setup",children:"Material and Shader Setup"}),"\n",(0,t.jsx)(e.h4,{id:"physically-based-materials",children:"Physically-Based Materials"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\n\r\npublic class RobotMaterialSetup : MonoBehaviour\r\n{\r\n    [Header("Material Properties")]\r\n    public float metallic = 0.5f;\r\n    public float smoothness = 0.5f;\r\n    public Texture albedoTexture;\r\n\r\n    void Start()\r\n    {\r\n        SetupMaterials();\r\n    }\r\n\r\n    void SetupMaterials()\r\n    {\r\n        Renderer renderer = GetComponent<Renderer>();\r\n        if (renderer != null)\r\n        {\r\n            Material material = renderer.material;\r\n            material.SetFloat("_Metallic", metallic);\r\n            material.SetFloat("_Smoothness", smoothness);\r\n\r\n            if (albedoTexture != null)\r\n                material.SetTexture("_MainTex", albedoTexture);\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h4,{id:"standard-shader-properties",children:"Standard Shader Properties"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Albedo"}),": Base color of the material"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Metallic"}),": How metallic the surface appears (0-1)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Smoothness"}),": Surface smoothness affecting reflections"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Normal Map"}),": Surface detail without geometry"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Occlusion"}),": Ambient light occlusion"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Emission"}),": Self-illuminating properties"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"physics-configuration",children:"Physics Configuration"}),"\n",(0,t.jsx)(e.h3,{id:"unity-physics-for-robotics",children:"Unity Physics for Robotics"}),"\n",(0,t.jsx)(e.p,{children:"Unity's physics engine provides:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Collision Detection"}),": Accurate collision detection and response"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Rigid Body Dynamics"}),": Realistic physics simulation"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Joint Constraints"}),": Various joint types for robot articulation"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Raycasting"}),": For sensor simulation"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\n\r\npublic class RobotPhysics : MonoBehaviour\r\n{\r\n    [Header("Physics Properties")]\r\n    public float mass = 1.0f;\r\n    public bool useGravity = true;\r\n    public float drag = 0.1f;\r\n    public float angularDrag = 0.05f;\r\n\r\n    private Rigidbody rb;\r\n\r\n    void Start()\r\n    {\r\n        SetupPhysics();\r\n    }\r\n\r\n    void SetupPhysics()\r\n    {\r\n        rb = GetComponent<Rigidbody>();\r\n        if (rb == null)\r\n            rb = gameObject.AddComponent<Rigidbody>();\r\n\r\n        rb.mass = mass;\r\n        rb.useGravity = useGravity;\r\n        rb.drag = drag;\r\n        rb.angularDrag = angularDrag;\r\n\r\n        // Freeze rotation if needed for 2D movement\r\n        // rb.constraints = RigidbodyConstraints.FreezeRotationX | RigidbodyConstraints.FreezeRotationZ;\r\n    }\r\n\r\n    public void ApplyForce(Vector3 force)\r\n    {\r\n        rb.AddForce(force);\r\n    }\r\n\r\n    public void ApplyTorque(Vector3 torque)\r\n    {\r\n        rb.AddTorque(torque);\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"joint-simulation",children:"Joint Simulation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\n\r\npublic class RobotJoint : MonoBehaviour\r\n{\r\n    [Header("Joint Properties")]\r\n    public ConfigurableJoint joint;\r\n    public float minLimit = -45f;\r\n    public float maxLimit = 45f;\r\n    public float spring = 100f;\r\n    public float damper = 10f;\r\n\r\n    void Start()\r\n    {\r\n        SetupJoint();\r\n    }\r\n\r\n    void SetupJoint()\r\n    {\r\n        if (joint == null)\r\n            joint = GetComponent<ConfigurableJoint>();\r\n\r\n        if (joint != null)\r\n        {\r\n            // Set angular limits\r\n            SoftJointLimit limit = joint.lowAngularXLimit;\r\n            limit.limit = minLimit;\r\n            joint.lowAngularXLimit = limit;\r\n\r\n            limit = joint.highAngularXLimit;\r\n            limit.limit = maxLimit;\r\n            joint.highAngularXLimit = limit;\r\n\r\n            // Set spring and damper\r\n            JointDrive drive = joint.slerpDrive;\r\n            drive.positionSpring = spring;\r\n            drive.positionDamper = damper;\r\n            joint.slerpDrive = drive;\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"sensor-simulation",children:"Sensor Simulation"}),"\n",(0,t.jsx)(e.h3,{id:"camera-sensors",children:"Camera Sensors"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"using UnityEngine;\r\nusing Unity.Robotics.ROSTCPConnector;\r\nusing RosMessageTypes.Sensor;\r\n\r\npublic class UnityCameraSensor : MonoBehaviour\r\n{\r\n    [Header(\"Camera Properties\")]\r\n    public Camera sensorCamera;\r\n    public int imageWidth = 640;\r\n    public int imageHeight = 480;\r\n    public float updateRate = 30f;\r\n\r\n    private ROSConnection ros;\r\n    private float nextUpdateTime;\r\n    private Texture2D sensorTexture;\r\n\r\n    void Start()\r\n    {\r\n        ros = ROSConnection.instance;\r\n        sensorTexture = new Texture2D(imageWidth, imageHeight, TextureFormat.RGB24, false);\r\n        nextUpdateTime = 0f;\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        if (Time.time >= nextUpdateTime)\r\n        {\r\n            CaptureAndSendImage();\r\n            nextUpdateTime = Time.time + (1.0f / updateRate);\r\n        }\r\n    }\r\n\r\n    void CaptureAndSendImage()\r\n    {\r\n        // Render texture setup would go here\r\n        // For now, we'll send placeholder data\r\n        // In practice, you'd capture from the camera and send as sensor_msgs/Image\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"lidar-simulation",children:"LiDAR Simulation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing System.Collections.Generic;\r\n\r\npublic class UnityLidar : MonoBehaviour\r\n{\r\n    [Header("LiDAR Properties")]\r\n    public float range = 10f;\r\n    public int rays = 360;\r\n    public float angleMin = -Mathf.PI;\r\n    public float angleMax = Mathf.PI;\r\n    public float updateRate = 10f;\r\n\r\n    private float nextUpdateTime;\r\n    private List<float> ranges;\r\n\r\n    void Start()\r\n    {\r\n        ranges = new List<float>(new float[rays]);\r\n        nextUpdateTime = 0f;\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        if (Time.time >= nextUpdateTime)\r\n        {\r\n            SimulateLidar();\r\n            nextUpdateTime = Time.time + (1.0f / updateRate);\r\n        }\r\n    }\r\n\r\n    void SimulateLidar()\r\n    {\r\n        for (int i = 0; i < rays; i++)\r\n        {\r\n            float angle = angleMin + (i * (angleMax - angleMin) / rays);\r\n            Vector3 direction = new Vector3(Mathf.Cos(angle), 0, Mathf.Sin(angle));\r\n\r\n            RaycastHit hit;\r\n            if (Physics.Raycast(transform.position, transform.TransformDirection(direction), out hit, range))\r\n            {\r\n                ranges[i] = hit.distance;\r\n            }\r\n            else\r\n            {\r\n                ranges[i] = range; // No obstacle detected\r\n            }\r\n        }\r\n    }\r\n\r\n    public float[] GetRanges()\r\n    {\r\n        return ranges.ToArray();\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"ros-integration",children:"ROS Integration"}),"\n",(0,t.jsx)(e.h3,{id:"unity-ros-bridge",children:"Unity-ROS Bridge"}),"\n",(0,t.jsx)(e.p,{children:"The Unity Robotics package provides:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"TCP Communication"}),": Bidirectional communication with ROS"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Message Types"}),": Support for standard ROS message types"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Transform Synchronization"}),": Coordinate system alignment"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing Unity.Robotics.ROSTCPConnector;\r\nusing RosMessageTypes.Geometry;\r\nusing RosMessageTypes.Std;\r\n\r\npublic class UnityROSBridge : MonoBehaviour\r\n{\r\n    [Header("ROS Configuration")]\r\n    public string rosIPAddress = "127.0.0.1";\r\n    public int rosPort = 10000;\r\n\r\n    private ROSConnection ros;\r\n    private string robotTopic = "unity_robot/cmd_vel";\r\n\r\n    void Start()\r\n    {\r\n        ros = ROSConnection.instance;\r\n        ros.Initialize(rosIPAddress, rosPort);\r\n\r\n        // Subscribe to ROS topics\r\n        ros.Subscribe<TwistMsg>(robotTopic, OnVelocityCommand);\r\n    }\r\n\r\n    void OnVelocityCommand(TwistMsg velocity)\r\n    {\r\n        // Apply velocity command to robot\r\n        Vector3 linear = new Vector3((float)velocity.linear.x,\r\n                                   (float)velocity.linear.y,\r\n                                   (float)velocity.linear.z);\r\n        Vector3 angular = new Vector3((float)velocity.angular.x,\r\n                                    (float)velocity.angular.y,\r\n                                    (float)velocity.angular.z);\r\n\r\n        // Apply movement to robot\r\n        transform.Translate(linear * Time.deltaTime);\r\n        transform.Rotate(angular * Mathf.Rad2Deg * Time.deltaTime);\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"publishing-robot-state",children:"Publishing Robot State"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing Unity.Robotics.ROSTCPConnector;\r\nusing RosMessageTypes.Geometry;\r\nusing RosMessageTypes.Sensor;\r\n\r\npublic class RobotStatePublisher : MonoBehaviour\r\n{\r\n    [Header("Publishing Configuration")]\r\n    public float publishRate = 50f; // Hz\r\n\r\n    private ROSConnection ros;\r\n    private float nextPublishTime;\r\n\r\n    void Start()\r\n    {\r\n        ros = ROSConnection.instance;\r\n        nextPublishTime = 0f;\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        if (Time.time >= nextPublishTime)\r\n        {\r\n            PublishRobotState();\r\n            nextPublishTime = Time.time + (1.0f / publishRate);\r\n        }\r\n    }\r\n\r\n    void PublishRobotState()\r\n    {\r\n        // Publish transform\r\n        TransformMsg transformMsg = new TransformMsg();\r\n        transformMsg.translation = new Vector3Msg(transform.position.x,\r\n                                                transform.position.y,\r\n                                                transform.position.z);\r\n        transformMsg.rotation = new QuaternionMsg(transform.rotation.x,\r\n                                               transform.rotation.y,\r\n                                               transform.rotation.z,\r\n                                               transform.rotation.w);\r\n\r\n        ros.SendUnityMessage("unity_robot/transform", transformMsg);\r\n\r\n        // Publish odometry\r\n        OdometryMsg odomMsg = new OdometryMsg();\r\n        odomMsg.header = new HeaderMsg();\r\n        odomMsg.header.stamp = new TimeStamp(Time.time);\r\n        odomMsg.header.frame_id = "odom";\r\n        odomMsg.child_frame_id = "base_link";\r\n        odomMsg.pose.pose.position = new PointMsg(transform.position.x,\r\n                                                transform.position.y,\r\n                                                transform.position.z);\r\n        odomMsg.pose.pose.orientation = new QuaternionMsg(transform.rotation.x,\r\n                                                        transform.rotation.y,\r\n                                                        transform.rotation.z,\r\n                                                        transform.rotation.w);\r\n\r\n        ros.SendUnityMessage("unity_robot/odom", odomMsg);\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"advanced-rendering-techniques",children:"Advanced Rendering Techniques"}),"\n",(0,t.jsx)(e.h3,{id:"physically-based-rendering-pbr",children:"Physically-Based Rendering (PBR)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\n\r\n[ExecuteInEditMode]\r\npublic class PBRTuner : MonoBehaviour\r\n{\r\n    [Header("PBR Properties")]\r\n    public float metallic = 0.0f;\r\n    public float smoothness = 0.5f;\r\n    public Color albedoColor = Color.white;\r\n\r\n    [Header("Lighting")]\r\n    public float ambientIntensity = 1.0f;\r\n    public Color ambientColor = Color.white;\r\n\r\n    private Renderer renderer;\r\n\r\n    void Start()\r\n    {\r\n        renderer = GetComponent<Renderer>();\r\n        UpdateMaterials();\r\n    }\r\n\r\n    void Update()\r\n    {\r\n#if UNITY_EDITOR\r\n        UpdateMaterials();\r\n#endif\r\n    }\r\n\r\n    void UpdateMaterials()\r\n    {\r\n        if (renderer != null && renderer.materials.Length > 0)\r\n        {\r\n            Material mat = renderer.material;\r\n            mat.SetFloat("_Metallic", metallic);\r\n            mat.SetFloat("_Smoothness", smoothness);\r\n            mat.SetColor("_Color", albedoColor);\r\n        }\r\n\r\n        // Update ambient lighting\r\n        RenderSettings.ambientIntensity = ambientIntensity;\r\n        RenderSettings.ambientLight = ambientColor;\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"real-time-global-illumination",children:"Real-time Global Illumination"}),"\n",(0,t.jsx)(e.p,{children:"Unity supports real-time Global Illumination (GI) for realistic lighting:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\n\r\npublic class GILightingSetup : MonoBehaviour\r\n{\r\n    [Header("Lightmapping Settings")]\r\n    public bool enableRealtimeGI = true;\r\n    public bool enableBakedGI = true;\r\n    public float indirectIntensity = 1.0f;\r\n\r\n    void Start()\r\n    {\r\n        SetupLighting();\r\n    }\r\n\r\n    void SetupLighting()\r\n    {\r\n        LightmapSettings.lightProbes.bounceIntensity = indirectIntensity;\r\n\r\n        // Configure lighting settings\r\n        RenderSettings.ambientMode = UnityEngine.Rendering.AmbientMode.Trilight;\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"post-processing-effects",children:"Post-Processing Effects"}),"\n",(0,t.jsx)(e.p,{children:"For enhanced visual quality:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"using UnityEngine;\r\nusing UnityEngine.Rendering.PostProcessing;\r\n\r\npublic class PostProcessSetup : MonoBehaviour\r\n{\r\n    public PostProcessVolume postProcessVolume;\r\n    public float motionBlurStrength = 0.1f;\r\n    public float bloomIntensity = 0.5f;\r\n\r\n    void Start()\r\n    {\r\n        ConfigurePostProcessing();\r\n    }\r\n\r\n    void ConfigurePostProcessing()\r\n    {\r\n        if (postProcessVolume == null) return;\r\n\r\n        // Get post-process profile\r\n        PostProcessProfile profile = postProcessVolume.profile;\r\n\r\n        // Configure motion blur\r\n        MotionBlur motionBlur;\r\n        if (profile.TryGetSettings(out motionBlur))\r\n        {\r\n            motionBlur.shutterAngle.value = motionBlurStrength * 180f;\r\n        }\r\n\r\n        // Configure bloom\r\n        Bloom bloom;\r\n        if (profile.TryGetSettings(out bloom))\r\n        {\r\n            bloom.intensity.value = bloomIntensity;\r\n        }\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,t.jsx)(e.h3,{id:"level-of-detail-lod",children:"Level of Detail (LOD)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"using UnityEngine;\r\n\r\npublic class RobotLOD : MonoBehaviour\r\n{\r\n    [System.Serializable]\r\n    public class LODLevel\r\n    {\r\n        public float distance;\r\n        public GameObject[] objects;\r\n    }\r\n\r\n    public LODLevel[] lodLevels;\r\n\r\n    void Start()\r\n    {\r\n        UpdateLOD(0); // Start with highest detail\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        float distance = Vector3.Distance(Camera.main.transform.position, transform.position);\r\n        int lodIndex = 0;\r\n\r\n        for (int i = 0; i < lodLevels.Length; i++)\r\n        {\r\n            if (distance > lodLevels[i].distance)\r\n            {\r\n                lodIndex = i;\r\n            }\r\n            else\r\n            {\r\n                break;\r\n            }\r\n        }\r\n\r\n        UpdateLOD(lodIndex);\r\n    }\r\n\r\n    void UpdateLOD(int level)\r\n    {\r\n        for (int i = 0; i < lodLevels.Length; i++)\r\n        {\r\n            bool isActive = (i == level);\r\n            foreach (GameObject obj in lodLevels[i].objects)\r\n            {\r\n                if (obj != null)\r\n                    obj.SetActive(isActive);\r\n            }\r\n        }\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"occlusion-culling",children:"Occlusion Culling"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\n\r\npublic class OcclusionCullingSetup : MonoBehaviour\r\n{\r\n    [Header("Occlusion Settings")]\r\n    public float cullingRadius = 50f;\r\n    public LayerMask occlusionMask = -1;\r\n\r\n    void Start()\r\n    {\r\n        SetupOcclusionCulling();\r\n    }\r\n\r\n    void SetupOcclusionCulling()\r\n    {\r\n        // Unity\'s occlusion culling is configured in the engine\r\n        // This is more of a setup guide than code\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"xr-and-advanced-visualization",children:"XR and Advanced Visualization"}),"\n",(0,t.jsx)(e.h3,{id:"virtual-reality-integration",children:"Virtual Reality Integration"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\nusing UnityEngine.XR;\r\n\r\npublic class VRRobotics : MonoBehaviour\r\n{\r\n    [Header("VR Configuration")]\r\n    public bool enableVR = true;\r\n    public float vrScale = 1.0f;\r\n\r\n    void Start()\r\n    {\r\n        if (enableVR)\r\n        {\r\n            EnableVR();\r\n        }\r\n    }\r\n\r\n    void EnableVR()\r\n    {\r\n        XRSettings.enabled = true;\r\n        transform.localScale = Vector3.one * vrScale;\r\n    }\r\n\r\n    void Update()\r\n    {\r\n        if (Input.GetKeyDown(KeyCode.V))\r\n        {\r\n            // Toggle VR mode\r\n            XRSettings.enabled = !XRSettings.enabled;\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(e.h3,{id:"1-coordinate-system-consistency",children:"1. Coordinate System Consistency"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"// Unity: X-right, Y-up, Z-forward\r\n// ROS: X-forward, Y-left, Z-up\r\n// Convert between systems when necessary\r\n\r\npublic static Vector3 UnityToROS(Vector3 unityPos)\r\n{\r\n    return new Vector3(unityPos.z, -unityPos.x, unityPos.y);\r\n}\r\n\r\npublic static Vector3 ROSToUnity(Vector3 rosPos)\r\n{\r\n    return new Vector3(-rosPos.y, rosPos.z, rosPos.x);\r\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-performance-monitoring",children:"2. Performance Monitoring"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\r\n\r\npublic class PerformanceMonitor : MonoBehaviour\r\n{\r\n    private float lastUpdate = 0f;\r\n    private int frameCount = 0;\r\n\r\n    void Update()\r\n    {\r\n        frameCount++;\r\n\r\n        if (Time.time - lastUpdate >= 1f)\r\n        {\r\n            int fps = frameCount;\r\n            frameCount = 0;\r\n            lastUpdate = Time.time;\r\n\r\n            Debug.Log($"FPS: {fps}, Frame time: {1000f/fps}ms");\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-resource-management",children:"3. Resource Management"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Use object pooling for frequently created/destroyed objects"}),"\n",(0,t.jsx)(e.li,{children:"Optimize mesh complexity"}),"\n",(0,t.jsx)(e.li,{children:"Use texture atlasing to reduce draw calls"}),"\n",(0,t.jsx)(e.li,{children:"Implement proper asset loading/unloading"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,t.jsx)(e.h3,{id:"1-coordinate-system-issues",children:"1. Coordinate System Issues"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Verify frame transformations between Unity and ROS"}),"\n",(0,t.jsx)(e.li,{children:"Check for proper axis conversions"}),"\n",(0,t.jsx)(e.li,{children:"Validate joint angle directions"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"2-performance-issues",children:"2. Performance Issues"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Reduce polygon count for real-time simulation"}),"\n",(0,t.jsx)(e.li,{children:"Use occlusion culling for large environments"}),"\n",(0,t.jsx)(e.li,{children:"Optimize shader complexity"}),"\n",(0,t.jsx)(e.li,{children:"Implement LOD systems"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"3-synchronization-problems",children:"3. Synchronization Problems"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Ensure proper time synchronization"}),"\n",(0,t.jsx)(e.li,{children:"Verify message rates match expectations"}),"\n",(0,t.jsx)(e.li,{children:"Check for network latency issues"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"learning-objectives-review",children:"Learning Objectives Review"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Understand Unity's role in robotics simulation and visualization \u2713"}),"\n",(0,t.jsx)(e.li,{children:"Set up Unity for robotics applications and simulation \u2713"}),"\n",(0,t.jsx)(e.li,{children:"Create realistic environments and materials for robotics \u2713"}),"\n",(0,t.jsx)(e.li,{children:"Integrate Unity with ROS/ROS 2 for robotics workflows \u2713"}),"\n",(0,t.jsx)(e.li,{children:"Apply advanced rendering techniques for robotics applications \u2713"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"practical-exercise",children:"Practical Exercise"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Install Unity and the Robotics package"}),"\n",(0,t.jsx)(e.li,{children:"Create a simple robot model with basic physics"}),"\n",(0,t.jsx)(e.li,{children:"Set up a simple environment with realistic materials"}),"\n",(0,t.jsx)(e.li,{children:"Implement basic ROS communication"}),"\n",(0,t.jsx)(e.li,{children:"Test the simulation and verify proper visualization"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"assessment-questions",children:"Assessment Questions"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"What are the advantages of using Unity for robotics simulation compared to traditional simulators?"}),"\n",(0,t.jsx)(e.li,{children:"Explain the process of setting up ROS communication in Unity."}),"\n",(0,t.jsx)(e.li,{children:"How do you handle coordinate system differences between Unity and ROS?"}),"\n",(0,t.jsx)(e.li,{children:"What are the key considerations for performance optimization in Unity robotics?"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Unity Robotics Hub: ",(0,t.jsx)(e.a,{href:"https://unity.com/solutions/industries/robotics",children:"https://unity.com/solutions/industries/robotics"})]}),"\n",(0,t.jsxs)(e.li,{children:["Unity Robotics Package: ",(0,t.jsx)(e.a,{href:"https://github.com/Unity-Technologies/Unity-Robotics-Hub",children:"https://github.com/Unity-Technologies/Unity-Robotics-Hub"})]}),"\n",(0,t.jsxs)(e.li,{children:["ROS-TCP-Connector: ",(0,t.jsx)(e.a,{href:"https://github.com/Unity-Technologies/ROS-TCP-Connector",children:"https://github.com/Unity-Technologies/ROS-TCP-Connector"})]}),"\n",(0,t.jsxs)(e.li,{children:["Unity Manual: ",(0,t.jsx)(e.a,{href:"https://docs.unity3d.com/Manual/index.html",children:"https://docs.unity3d.com/Manual/index.html"})]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(e.p,{children:["Continue to ",(0,t.jsx)(e.a,{href:"/physical-ai/docs/module-2/sensor-simulation",children:"Sensor Simulation"})," to learn about simulating various sensors in robotics applications."]})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}}}]);