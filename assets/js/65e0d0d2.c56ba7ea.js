"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics=globalThis.webpackChunkphysical_ai_humanoid_robotics||[]).push([[313],{7570(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"module-1/nodes-topics-services","title":"Nodes, Topics, Services","description":"Comprehensive guide to ROS 2 communication patterns: nodes, topics, and services","source":"@site/docs/module-1/nodes-topics-services.md","sourceDirName":"module-1","slug":"/module-1/nodes-topics-services","permalink":"/physical-ai/docs/module-1/nodes-topics-services","draft":false,"unlisted":false,"editUrl":"https://github.com/physical-ai-textbook/book-ai/tree/main/docs/module-1/nodes-topics-services.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"nodes-topics-services","title":"Nodes, Topics, Services","sidebar_position":3,"description":"Comprehensive guide to ROS 2 communication patterns: nodes, topics, and services","keywords":["ros2 nodes","topics","services","communication patterns","robotics communication"]},"sidebar":"textbook","previous":{"title":"ROS 2 Architecture","permalink":"/physical-ai/docs/module-1/ros2-architecture"},"next":{"title":"Python with rclpy","permalink":"/physical-ai/docs/module-1/python-rclpy"}}');var i=r(4848),o=r(8453);const t={id:"nodes-topics-services",title:"Nodes, Topics, Services",sidebar_position:3,description:"Comprehensive guide to ROS 2 communication patterns: nodes, topics, and services",keywords:["ros2 nodes","topics","services","communication patterns","robotics communication"]},c="Nodes, Topics, Services",a={},l=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Nodes: The Foundation of ROS 2",id:"nodes-the-foundation-of-ros-2",level:2},{value:"Node Definition",id:"node-definition",level:3},{value:"Node Lifecycle",id:"node-lifecycle",level:3},{value:"Node Names and Namespacing",id:"node-names-and-namespacing",level:3},{value:"Topics: Asynchronous Communication",id:"topics-asynchronous-communication",level:2},{value:"Publisher-Subscriber Pattern",id:"publisher-subscriber-pattern",level:3},{value:"Creating Publishers",id:"creating-publishers",level:3},{value:"Creating Subscribers",id:"creating-subscribers",level:3},{value:"Complex Message Types",id:"complex-message-types",level:3},{value:"Topic QoS Configuration",id:"topic-qos-configuration",level:3},{value:"Services: Synchronous Communication",id:"services-synchronous-communication",level:2},{value:"Request-Response Pattern",id:"request-response-pattern",level:3},{value:"Creating Services",id:"creating-services",level:3},{value:"Creating Service Clients",id:"creating-service-clients",level:3},{value:"Service Implementation Example",id:"service-implementation-example",level:3},{value:"Actions: Advanced Communication",id:"actions-advanced-communication",level:2},{value:"Communication Pattern Selection",id:"communication-pattern-selection",level:2},{value:"When to Use Each Pattern",id:"when-to-use-each-pattern",level:3},{value:"Performance Considerations",id:"performance-considerations",level:3},{value:"Debugging and Monitoring",id:"debugging-and-monitoring",level:2},{value:"Using ROS 2 Command Line Tools",id:"using-ros-2-command-line-tools",level:3},{value:"Programmatic Monitoring",id:"programmatic-monitoring",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Node Design",id:"node-design",level:3},{value:"Topic Design",id:"topic-design",level:3},{value:"Service Design",id:"service-design",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Learning Objectives Review",id:"learning-objectives-review",level:2},{value:"Practical Exercise",id:"practical-exercise",level:2},{value:"Assessment Questions",id:"assessment-questions",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"nodes-topics-services",children:"Nodes, Topics, Services"})}),"\n",(0,i.jsx)(n.p,{children:"This chapter covers the fundamental communication patterns in ROS 2: nodes, topics, and services. These patterns form the backbone of ROS 2's distributed system architecture."}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create and manage ROS 2 nodes effectively"}),"\n",(0,i.jsx)(n.li,{children:"Implement publisher-subscriber communication using topics"}),"\n",(0,i.jsx)(n.li,{children:"Design and implement request-response communication using services"}),"\n",(0,i.jsx)(n.li,{children:"Apply appropriate communication patterns to different use cases"}),"\n",(0,i.jsx)(n.li,{children:"Debug and monitor communication between nodes"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"nodes-the-foundation-of-ros-2",children:"Nodes: The Foundation of ROS 2"}),"\n",(0,i.jsx)(n.h3,{id:"node-definition",children:"Node Definition"}),"\n",(0,i.jsx)(n.p,{children:"A node is the fundamental building block of a ROS 2 system. It's an executable process that performs specific robot functions and communicates with other nodes."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Example: Basic ROS 2 Node structure\r\nimport rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass SensorNode(Node):\r\n    def __init__(self):\r\n        # Initialize the node with a name\r\n        super().__init__('sensor_node')\r\n\r\n        # Node-specific initialization\r\n        self.sensor_data = None\r\n        self.get_logger().info('Sensor node initialized')\n"})}),"\n",(0,i.jsx)(n.h3,{id:"node-lifecycle",children:"Node Lifecycle"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 nodes have a well-defined lifecycle that includes initialization, execution, and cleanup phases:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.lifecycle import LifecycleNode, LifecycleState\r\nfrom rclpy.lifecycle import TransitionCallbackReturn\r\n\r\nclass LifecycleSensorNode(LifecycleNode):\r\n    def __init__(self):\r\n        super().__init__('lifecycle_sensor_node')\r\n\r\n    def on_configure(self, state):\r\n        self.get_logger().info('Configuring sensor node')\r\n        # Setup sensors, initialize variables\r\n        return TransitionCallbackReturn.SUCCESS\r\n\r\n    def on_activate(self, state):\r\n        self.get_logger().info('Activating sensor node')\r\n        # Start sensor data collection\r\n        return TransitionCallbackReturn.SUCCESS\r\n\r\n    def on_deactivate(self, state):\r\n        self.get_logger().info('Deactivating sensor node')\r\n        # Stop sensor data collection\r\n        return TransitionCallbackReturn.SUCCESS\n"})}),"\n",(0,i.jsx)(n.h3,{id:"node-names-and-namespacing",children:"Node Names and Namespacing"}),"\n",(0,i.jsx)(n.p,{children:"Nodes can be organized using namespaces for better system organization:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Node with namespace\r\nclass RobotArmNode(Node):\r\n    def __init__(self):\r\n        # Create node with namespace\r\n        super().__init__('arm_controller', namespace='robot1')\r\n        # This creates node name: /robot1/arm_controller\n"})}),"\n",(0,i.jsx)(n.h2,{id:"topics-asynchronous-communication",children:"Topics: Asynchronous Communication"}),"\n",(0,i.jsx)(n.h3,{id:"publisher-subscriber-pattern",children:"Publisher-Subscriber Pattern"}),"\n",(0,i.jsx)(n.p,{children:"Topics enable asynchronous, many-to-many communication using the publisher-subscriber pattern:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 Publisher 1 \u2502    \u2502 Publisher 2 \u2502\r\n\u2502   (Data)    \u2502    \u2502   (Data)    \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n       \u2502                  \u2502\r\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                \u2502\r\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n        \u2502   Topic/Topic  \u2502\r\n        \u2502   (Messages)   \u2502\r\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n        \u2502   Topic/Topic  \u2502\r\n        \u2502   (Messages)   \u2502\r\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n       \u2502                  \u2502\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 Subscriber 1\u2502    \u2502 Subscriber 2 \u2502\r\n\u2502 (Processes) \u2502    \u2502 (Processes)  \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h3,{id:"creating-publishers",children:"Creating Publishers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from std_msgs.msg import String, Int32\r\nimport rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass DataPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('data_publisher')\r\n\r\n        # Create publisher with topic name, message type, and queue size\r\n        self.publisher_ = self.create_publisher(\r\n            String,\r\n            'sensor_data',\r\n            10  # Queue size\r\n        )\r\n\r\n        # Timer to publish data periodically\r\n        self.timer = self.create_timer(0.5, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = f'Sensor reading: {self.i}'\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publishing: {msg.data}')\r\n        self.i += 1\n"})}),"\n",(0,i.jsx)(n.h3,{id:"creating-subscribers",children:"Creating Subscribers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from std_msgs.msg import String\r\nimport rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass DataSubscriber(Node):\r\n    def __init__(self):\r\n        super().__init__('data_subscriber')\r\n\r\n        # Create subscription to topic with callback function\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'sensor_data',\r\n            self.listener_callback,\r\n            10  # Queue size\r\n        )\r\n        # Don't forget to declare that we're not using the subscription\r\n        self.subscription  # prevent unused variable warning\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'I heard: {msg.data}')\n"})}),"\n",(0,i.jsx)(n.h3,{id:"complex-message-types",children:"Complex Message Types"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 supports complex message types beyond the standard ones:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from geometry_msgs.msg import Twist\r\nfrom sensor_msgs.msg import LaserScan\r\nfrom std_msgs.msg import Header\r\n\r\nclass NavigationNode(Node):\r\n    def __init__(self):\r\n        super().__init__('navigation_node')\r\n\r\n        # Publisher for velocity commands\r\n        self.cmd_vel_pub = self.create_publisher(\r\n            Twist,\r\n            'cmd_vel',\r\n            10\r\n        )\r\n\r\n        # Subscriber for laser scan data\r\n        self.scan_sub = self.create_subscription(\r\n            LaserScan,\r\n            'scan',\r\n            self.scan_callback,\r\n            10\r\n        )\r\n\r\n    def scan_callback(self, msg):\r\n        # Process laser scan data\r\n        min_distance = min(msg.ranges)\r\n        self.get_logger().info(f'Min obstacle distance: {min_distance}')\n"})}),"\n",(0,i.jsx)(n.h3,{id:"topic-qos-configuration",children:"Topic QoS Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Quality of Service settings allow fine-tuning topic communication:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy\r\n\r\nclass QoSPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('qos_publisher')\r\n\r\n        # Configure QoS for real-time sensor data\r\n        sensor_qos = QoSProfile(\r\n            depth=5,\r\n            reliability=ReliabilityPolicy.BEST_EFFORT,\r\n            durability=DurabilityPolicy.VOLATILE\r\n        )\r\n\r\n        # Configure QoS for critical commands\r\n        command_qos = QoSProfile(\r\n            depth=10,\r\n            reliability=ReliabilityPolicy.RELIABLE,\r\n            durability=DurabilityPolicy.TRANSIENT_LOCAL\r\n        )\r\n\r\n        self.sensor_pub = self.create_publisher(\r\n            String, 'sensor_data', sensor_qos\r\n        )\r\n        self.command_pub = self.create_publisher(\r\n            Twist, 'cmd_vel', command_qos\r\n        )\n"})}),"\n",(0,i.jsx)(n.h2,{id:"services-synchronous-communication",children:"Services: Synchronous Communication"}),"\n",(0,i.jsx)(n.h3,{id:"request-response-pattern",children:"Request-Response Pattern"}),"\n",(0,i.jsx)(n.p,{children:"Services enable synchronous, one-to-one communication where a client sends a request and waits for a response:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     Request     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502   Client    \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192 \u2502   Server    \u2502\r\n\u2502             \u2502                 \u2502             \u2502\r\n\u2502             \u2502 \u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502             \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    Response     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h3,{id:"creating-services",children:"Creating Services"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from example_interfaces.srv import AddTwoInts\r\nimport rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass AddTwoIntsService(Node):\r\n    def __init__(self):\r\n        super().__init__('add_two_ints_service')\r\n\r\n        # Create service with service type, name, and callback\r\n        self.srv = self.create_service(\r\n            AddTwoInts,\r\n            'add_two_ints',\r\n            self.add_two_ints_callback\r\n        )\r\n\r\n    def add_two_ints_callback(self, request, response):\r\n        # Process the request and set the response\r\n        response.sum = request.a + request.b\r\n        self.get_logger().info(f'Returning {request.a} + {request.b} = {response.sum}')\r\n        return response\n"})}),"\n",(0,i.jsx)(n.h3,{id:"creating-service-clients",children:"Creating Service Clients"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from example_interfaces.srv import AddTwoInts\r\nimport rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass AddTwoIntsClient(Node):\r\n    def __init__(self):\r\n        super().__init__('add_two_ints_client')\r\n\r\n        # Create client for the service\r\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\r\n\r\n        # Wait for service to be available\r\n        while not self.cli.wait_for_service(timeout_sec=1.0):\r\n            self.get_logger().info('Service not available, waiting again...')\r\n\r\n        self.request = AddTwoInts.Request()\r\n\r\n    def send_request(self, a, b):\r\n        self.request.a = a\r\n        self.request.b = b\r\n        # Asynchronously call the service\r\n        self.future = self.cli.call_async(self.request)\r\n        return self.future\n"})}),"\n",(0,i.jsx)(n.h3,{id:"service-implementation-example",children:"Service Implementation Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from std_srvs.srv import SetBool\r\nimport rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass MotorControlService(Node):\r\n    def __init__(self):\r\n        super().__init__('motor_control_service')\r\n\r\n        # Service to enable/disable motors\r\n        self.motor_enable_srv = self.create_service(\r\n            SetBool,\r\n            'motor_enable',\r\n            self.motor_enable_callback\r\n        )\r\n\r\n        self.motors_enabled = False\r\n\r\n    def motor_enable_callback(self, request, response):\r\n        self.motors_enabled = request.data\r\n        response.success = True\r\n        response.message = f'Motors {\"enabled\" if self.motors_enabled else \"disabled\"}'\r\n        return response\n"})}),"\n",(0,i.jsx)(n.h2,{id:"actions-advanced-communication",children:"Actions: Advanced Communication"}),"\n",(0,i.jsx)(n.p,{children:"While not the main focus of this section, actions provide goal-based communication:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from rclpy.action import ActionServer\r\nfrom rclpy.node import Node\r\nfrom example_interfaces.action import Fibonacci\r\n\r\nclass FibonacciActionServer(Node):\r\n    def __init__(self):\r\n        super().__init__('fibonacci_action_server')\r\n\r\n        # Create action server\r\n        self._action_server = ActionServer(\r\n            self,\r\n            Fibonacci,\r\n            'fibonacci',\r\n            self.execute_callback\r\n        )\r\n\r\n    def execute_callback(self, goal_handle):\r\n        self.get_logger().info('Executing goal...')\r\n\r\n        feedback_msg = Fibonacci.Feedback()\r\n        feedback_msg.sequence = [0, 1]\r\n\r\n        for i in range(1, goal_handle.request.order):\r\n            if goal_handle.is_cancel_requested:\r\n                goal_handle.canceled()\r\n                self.get_logger().info('Goal canceled')\r\n                return Fibonacci.Result()\r\n\r\n            feedback_msg.sequence.append(\r\n                feedback_msg.sequence[i] + feedback_msg.sequence[i-1]\r\n            )\r\n\r\n            goal_handle.publish_feedback(feedback_msg)\r\n\r\n        goal_handle.succeed()\r\n        result = Fibonacci.Result()\r\n        result.sequence = feedback_msg.sequence\r\n        return result\n"})}),"\n",(0,i.jsx)(n.h2,{id:"communication-pattern-selection",children:"Communication Pattern Selection"}),"\n",(0,i.jsx)(n.h3,{id:"when-to-use-each-pattern",children:"When to Use Each Pattern"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Pattern"}),(0,i.jsx)(n.th,{children:"Use Case"}),(0,i.jsx)(n.th,{children:"Characteristics"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Topics"}),(0,i.jsx)(n.td,{children:"Sensor data, continuous commands"}),(0,i.jsx)(n.td,{children:"Asynchronous, many-to-many, real-time"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Services"}),(0,i.jsx)(n.td,{children:"Query-response, configuration"}),(0,i.jsx)(n.td,{children:"Synchronous, one-to-one, reliable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Actions"}),(0,i.jsx)(n.td,{children:"Long-running tasks with feedback"}),(0,i.jsx)(n.td,{children:"Goal-based, with progress feedback"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Example: Choosing the right pattern for different scenarios\r\n\r\n# For sensor data (high frequency, real-time)\r\nsensor_pub = self.create_publisher(LaserScan, 'scan', 1)  # Topic\r\n\r\n# For robot configuration (low frequency, reliable)\r\nconfig_client = self.create_client(SetBool, 'config_service')  # Service\r\n\r\n# For navigation (long-running with feedback)\r\nnav_action_client = ActionClient(self, NavigateToPose, 'navigate_to_pose')  # Action\n"})}),"\n",(0,i.jsx)(n.h2,{id:"debugging-and-monitoring",children:"Debugging and Monitoring"}),"\n",(0,i.jsx)(n.h3,{id:"using-ros-2-command-line-tools",children:"Using ROS 2 Command Line Tools"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# List all nodes\r\nros2 node list\r\n\r\n# List all topics\r\nros2 topic list\r\n\r\n# Echo messages on a topic\r\nros2 topic echo /sensor_data std_msgs/msg/String\r\n\r\n# Call a service\r\nros2 service call /add_two_ints example_interfaces/srv/AddTwoInts "{a: 1, b: 2}"\r\n\r\n# Show node graph\r\nrqt_graph\n'})}),"\n",(0,i.jsx)(n.h3,{id:"programmatic-monitoring",children:"Programmatic Monitoring"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"class MonitoringNode(Node):\r\n    def __init__(self):\r\n        super().__init__('monitoring_node')\r\n\r\n        # Get list of active nodes\r\n        node_names = self.get_node_names()\r\n        self.get_logger().info(f'Active nodes: {node_names}')\r\n\r\n        # Get topic names and types\r\n        topic_names_and_types = self.get_topic_names_and_types()\r\n        self.get_logger().info(f'Topics: {topic_names_and_types}')\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"node-design",children:"Node Design"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Single Responsibility"}),": Each node should have one primary function"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Handling"}),": Implement proper error handling and recovery"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Resource Management"}),": Properly clean up resources in destruction"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"topic-design",children:"Topic Design"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Message Efficiency"}),": Use appropriate message types and sizes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Topic Naming"}),": Use descriptive, consistent naming conventions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"QoS Selection"}),": Choose appropriate QoS settings for each use case"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"service-design",children:"Service Design"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Response Time"}),": Services should respond in a reasonable time"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Idempotency"}),": Design services to be idempotent when possible"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Handling"}),": Return appropriate error codes in responses"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.p,{children:["Continue to ",(0,i.jsx)(n.a,{href:"/physical-ai/docs/module-1/python-rclpy",children:"Python with rclpy"})," to learn how to implement these communication patterns using Python."]}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives-review",children:"Learning Objectives Review"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create and manage ROS 2 nodes effectively \u2713"}),"\n",(0,i.jsx)(n.li,{children:"Implement publisher-subscriber communication using topics \u2713"}),"\n",(0,i.jsx)(n.li,{children:"Design and implement request-response communication using services \u2713"}),"\n",(0,i.jsx)(n.li,{children:"Apply appropriate communication patterns to different use cases \u2713"}),"\n",(0,i.jsx)(n.li,{children:"Debug and monitor communication between nodes \u2713"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"practical-exercise",children:"Practical Exercise"}),"\n",(0,i.jsx)(n.p,{children:"Create a simple robot system with:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"A sensor node that publishes random sensor data"}),"\n",(0,i.jsx)(n.li,{children:"A processing node that subscribes to sensor data and processes it"}),"\n",(0,i.jsx)(n.li,{children:"A service node that provides configuration commands"}),"\n",(0,i.jsx)(n.li,{children:"Use rqt_graph to visualize the communication"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"assessment-questions",children:"Assessment Questions"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"What is the difference between topics and services in ROS 2?"}),"\n",(0,i.jsx)(n.li,{children:"Explain when you would use QoS settings in topic communication."}),"\n",(0,i.jsx)(n.li,{children:"What are the advantages and disadvantages of the publisher-subscriber pattern?"}),"\n",(0,i.jsx)(n.li,{children:"How do you handle service calls asynchronously in ROS 2?"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["ROS 2 Topics and Services: ",(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Topics/Understanding-ROS2-Topics.html",children:"https://docs.ros.org/en/humble/Tutorials/Topics/Understanding-ROS2-Topics.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["ROS 2 Services: ",(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Services/Understanding-ROS2-Services.html",children:"https://docs.ros.org/en/humble/Tutorials/Services/Understanding-ROS2-Services.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Quality of Service: ",(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html",children:"https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>t,x:()=>c});var s=r(6540);const i={},o=s.createContext(i);function t(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);